# Figures

Mindbox tech assessment

## По архитектуре, почему сделал именно так

- Промежуточные слои для инкапсуляции бизнес-логики, например медиаторы или какие-нибудь менеджеры здесь избыточны.
- Прослоек между базой, вроде IStorage, IRepository тоже не нужно: DbContext уже достаточная абстракция
- Автомаппера, флюент валидатора тоже нет, делаем чем проще тем лучше: меньше кода поддерживать.
- Сделал разные эндоинты для создания разных фигур: Параметризованные входные эндопинты удобны для всех, фиксированные объекты, в сваггере сразу видно, что требуется, проще писать клиенты. К тому же на стороне клиента тип фигуры в урле может быть параметром, поэтому даже формально можно считать одним эндпоинтом.
- Нет логгирования, авторизации, метрик, трассировки и пр.
- Докер не использую, потому что это дополнительный отдельный слой: нужно устанавливать себе локально, билдить, тестировать, конфигурировать приложение внутри докера и т.д. ну и раз это не обязатнльно, сделал как проще
- Верссии .net sdk: Api/db вызываются в рамках одного процеса, поэтому нет смысла ограничивать и используем полноценный .net вместо .net standart. А так как контакрты потенциально экспортиремы, используем более широкий .net standart 2
- Нет отельного сериализатора и обработчика ошибок - выводим просто дефолтным фильтром текст ошибки

## По бд
- Храним все в одной таблице, потому что этого вполне достаточно.
- JSON тип колонки для исходного объекта не использую, потому что мы не собираемся никак обрабатывать данные на стороне базы, и поэтому нет смысла ее нагружать.
- Нет смысла пересчитывать площадь каждый раз, поэтому храним в базе. Сценария изменения фигуры тоже нет, поэтому считаем прямо в контроллере.
- Почему тип фигуры - строковая константа, без энумов и пр. Потому что процесс создания определен: через апи. Бд тупо хранилище без бизнес логики. Клиент тоже не может повлиять на создаваемый тип. Поэтому накосячить можно только изменяя сущестующий код, а это уже не вопрос про enum'ы.
- Area nullable для возможных точек и линий

## Остальное

- Не проверяем что треугольник - это именно треугольник, а не 3 точки на линии. В рамках задани это ничего не меняет, просто будет дополнительная логика валидации.
- Фигуры могут задаваться формулой, как графики, либо не имееть координат и задаваться высотой/шириной и пр. Я выбрал как кажется логичнее.
